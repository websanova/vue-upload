!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t){var n=new i.a(e,t),o=n.on,s=n.bind,r=n.option;e.upload=n,Object.defineProperties(e.prototype,{$upload:{get:function(){return n.on=o.bind(this),n.bind=s.bind(this),n.option=r.bind(this),n}}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),t.default=o},function(e,t,n){"use strict";function o(e){e.preventDefault(),e.stopPropagation()}function i(){return Math.random().toString(32).substring(2)}function s(e){return e.data.errors?e.data.errors[0]||{}:e.data.msg?{code:e.data.code,msg:e.data.msg}:{}}function r(e){var t={};return j.Vue.http.post(e.url,e.body,{progress:e.progress,before:function(e){t=e}}).then(e.success,e.error),t}function l(e){j.instances[e]||(j.Vue.set(j.$vm.instances,e,{files:{all:[],queue:[],progress:[],upload:[],success:[],error:[]},errors:[],meta:{state:"ready",percentComplete:0},dropzone:{active:!1}}),j.instances[e]={key:e,$vm:j.$vm.instances[e]})}function a(){var e,t,n=this;for(e=0,t=this.$vm.files.all.length;e<t;e++)!function(e){x.call(n,n.$vm.files.all[e])}(e);this.$vm.files={all:[],queue:[],progress:[],upload:[],success:[],error:[]},this.$vm.errors=[],this.$vm.meta.state="ready",this.$vm.meta.percentComplete=0,this.$vm.dropzone.active=!1}function c(e,t,n){var o=j.instances[e];o.options=Object.assign({},j.options,n),o.input=f.call(o),o.dropzone=m.call(o),p.call(o,t)}function p(e){this.onSelect=this.options.onSelect?this.options.onSelect.bind(e):function(){},this.onStart=this.options.onStart?this.options.onStart.bind(e):function(){},this.onQueue=this.options.onQueue?this.options.onQueue.bind(e):function(){},this.onProgress=this.options.onProgress?this.options.onProgress.bind(e):function(){},this.onUpload=this.options.onUpload?this.options.onUpload.bind(e):function(){},this.onError=this.options.onError?this.options.onError.bind(e):function(){},this.onSuccess=this.options.onSuccess?this.options.onSuccess.bind(e):function(){},this.onComplete=this.options.onComplete?this.options.onComplete.bind(e):function(){},this.onEnd=this.options.onEnd?this.options.onEnd.bind(e):function(){}}function u(e,t){if(this.options[e]=t,"dropzone"===e)return v.call(this),void(this.dropzone=m.call(this))}function d(e){var t=j.instances[e];h.call(t),v.call(t),delete t.$vm,delete j.instances[e]}function f(){var e,t=this;return e=document.createElement("input"),e.type="file",e.multiple=!0===this.options.multiple,e.accept=this.options.accept?this.options.accept:"*/*",e.style.display="none",e.onchange=function(){y.call(t,e.files),e.value=null},document.body.appendChild(e),{$el:e}}function h(){this.input.$el.parentNode.removeChild(this.input.$el),this.input.$el=null}function m(){var e,t=this;return e={$el:document.getElementById(this.options.dropzoneId),counter:0,dragenter:null,drageover:null,dragleave:null,drop:null},e.$el&&(e.dragenter=function(e){o(e),t.dropzone.counter++,t.$vm.dropzone.active=!0},e.dragover=function(e){o(e),e.dataTransfer.dropEffect="copy",t.$vm.dropzone.active=!0},e.dragleave=function(e){o(e),--t.dropzone.counter<=0&&(t.dropzone.counter=0,t.$vm.dropzone.active=!1)},e.drop=function(e){o(e),t.dropzone.counter=0,t.$vm.dropzone.active=!1,y.call(t,e.dataTransfer.files)},e.$el.addEventListener("dragenter",e.dragenter,!1),e.$el.addEventListener("dragover",e.dragover,!1),e.$el.addEventListener("dragleave",e.dragleave,!1),e.$el.addEventListener("drop",e.drop,!1)),e}function v(){this.dropzone.$el&&(this.dropzone.$el.removeEventListener("dragenter",this.dropzone.dragenter,!1),this.dropzone.$el.removeEventListener("dragover",this.dropzone.dragover,!1),this.dropzone.$el.removeEventListener("dragleave",this.dropzone.dragleave,!1),this.dropzone.$el.removeEventListener("drop",this.dropzone.drop,!1),this.dropzone.dragenter=null,this.dropzone.dragover=null,this.dropzone.dragleave=null,this.dropzone.drop=null,this.dropzone.$el=null)}function $(e){e=e||{},e={file:e.file||null,code:e.code||null,msg:e.msg||null},e.$id=i(),e.file=e.file||null,e.clear=g.bind(this,e),e.file&&(e.file.errors.push(e),e.file.error=e),this.$vm.errors.push(e)}function g(e){var t,n;if(e)for(t=0,n=this.$vm.errors.length;t<n;t++)if(this.$vm.errors[t].$id===e.$id){this.$vm.errors.splice(t,1);break}}function x(e){var t,n,o;if(e){for(e.$request&&e.$request.abort(),t=0,n=this.$vm.errors.length;t<n;t++)if(this.$vm.errors[t].file&&this.$vm.errors[t].file.$id===e.$id){this.$vm.errors.splice(t,1);break}o=S.call(this,e),this.$vm.files[e.state].splice(o,1),o=S.call(this,e,"all"),this.$vm.files.all.splice(o,1)}}function b(e,t){var n=new FileReader;n.addEventListener("load",function(){e.$raw=n.result,t&&t(e)},!1),e.$file&&n.readAsDataURL(e.$file)}function y(e){var t,n,o=this;if(e.length>this.options.maxFilesSelect)return void this.onSelect(e,{code:"file-max-select",msg:this.options.maxFilesSelectMsg.replace("{max}",this.options.maxFilesSelect)});for(t=0,n=e.length;t<n;t++)!function(t){z.call(o,e[t])}(t);this.onSelect(e),this.options.startOnSelect&&F.call(this)}function z(e){var t,n,o,s=this;n=(e.name||"").split("."),t=(e.type||"").split("/"),o=n.length>1?n[n.length-1]:null,o=o||(t[1]||null),o=(o||"").toLowerCase(),t=t[0]||null,e={$id:i(),$file:e,$request:null,$raw:null,$instance:this,name:e.name,size:e.size,type:t,extension:o,state:"queue",active:!0,sending:!1,errors:[],error:{},percentComplete:0,preview:function(t){b(e,t)}},e.clear=function(){x.call(s,e),"uploading"===s.$vm.meta.state&&F.call(s)},this.$vm.files.all.push(e),this.$vm.files.queue.push(e),C.call(this,e),this.onQueue(e)}function S(e,t){var n,o,i;for(i=this.$vm.files[t||e.state],n=0,o=i.length;n<o;n++)if(e.$id===i[n].$id)return n;return-1}function E(e,t){var n;n=S.call(this,e),this.$vm.files[e.state].splice(n,1),this.$vm.files[t].push(e),e.state=t}function C(e){var t;return this.options.extensions&&this.options.extensions.indexOf(e.extension)<0?t={file:e,code:"file-extension",msg:this.options.invalidExtensionMsg.replace("{extensions}",this.options.extensions.join(", "))}:this.options.maxSizePerFile>0&&e.size>this.options.maxSizePerFile&&(t={file:e,code:"file-max-size",msg:this.options.maxFileSizeMsg.replace("{max}",Math.floor(this.options.maxSizePerFile/1024/1024))}),!t||($.call(this,t),!1)}function F(){var e,t,n;if(!(this.$vm.files.progress.length>=this.options.maxFilesInProgress))if(this.$vm.files.queue.length){if(!this.$vm.files.queue.length||"ready"!==this.$vm.meta.state&&"complete"!==this.$vm.meta.state||this.onStart(),n=this.$vm.files.queue[0],!C.call(this,n))return E.call(this,n,"error"),this.onError(n),void F.call(this);this.$vm.meta.state="uploading",P.call(this,n),F.call(this)}else if(!this.$vm.files.upload.length&&!this.$vm.files.progress.length&&"uploading"===this.$vm.meta.state){for(this.$vm.meta.state="complete",e=0,t=this.$vm.files.all.length;e<t;e++)this.$vm.files.all[e].active=!1;this.onEnd()}}function P(e){var t,n,o,i=this;e.sending=!0,E.call(this,e,"progress"),n=new FormData,n.append(this.options.name,e.$file);for(t in e.$instance.options.body)n.append(t,e.$instance.options.body[t]);o=this.options.http({url:e.$instance.options.url,body:n,progress:function(t){e.percentComplete=t.lengthComputable?Math.ceil(t.loaded/t.total*100):0,i.onProgress(e,t),e.percentComplete>=100&&(E.call(i,e,"upload"),i.onUpload(e,t)),w.call(i)},success:function(t){e.sending=!1,E.call(i,e,"success"),i.onSuccess(e,t),i.onComplete(e,t),F.call(i)},error:function(t){var n;e.sending=!1,n=i.options.parseErrors(t),n.file=e,$.call(i,n),E.call(i,e,"error"),i.onError(e,t),i.onComplete(e,t),F.call(i)}}),e.$request=o}function w(){var e,t,n,o;for(o=0,e=0,t=this.$vm.files.all.length;e<t;e++)this.$vm.files.all[e].active&&o++;for(n=100*(o-this.$vm.files.queue.length-this.$vm.files.progress.length),e=0,t=this.$vm.files.progress.length;e<t;e++)n+=this.$vm.files.progress[e].percentComplete;this.$vm.meta.percentComplete=Math.ceil(n/(100*o)*100)}function M(e,t){this.options=Object.assign({},q,t),this.Vue=e,this.$vm=new e({data:function(){return{instances:{}}}}),this.instances={},j=this}var j=null,q={url:null,name:"file",accept:null,body:{},dropzoneId:null,onSelect:null,onStart:null,onQueue:null,onProgress:null,onUpload:null,onError:null,onSuccess:null,onComplete:null,onEnd:null,startOnSelect:!0,extensions:["jpeg","jpg","png","gif"],multiple:!1,maxFilesSelect:4,maxFilesInProgress:2,maxSizePerFile:2097152,maxFilesSelectMsg:"Max of {max} files can be selected at a time.",maxFileSizeMsg:"Max of {max} mb per file.",invalidExtensionMsg:"File must be one of {extensions}.",parseErrors:s,http:r};M.prototype.on=function(e,t){l(e),c(e,this,t)},M.prototype.off=function(e){d(e)},M.prototype.bind=function(e){p.call(j.instances[e],this)},M.prototype.reset=function(e){l(e),a.call(j.instances[e])},M.prototype.select=function(e){j.instances[e].input.$el.click()},M.prototype.start=function(e){l(e),F.call(j.instances[e])},M.prototype.files=function(e){return l(e),j.instances[e].$vm.files},M.prototype.file=function(e){var t;return l(e),t=j.instances[e].$vm,t.files.all[t.files.all.length-1]||{error:{}}},M.prototype.exists=function(e){return!!j.instances[e]},M.prototype.meta=function(e){return l(e),j.instances[e].$vm.meta},M.prototype.percent=function(e){return l(e),j.instances[e].$vm.meta.percentComplete},M.prototype.state=function(e){return l(e),j.instances[e].$vm.meta.state},M.prototype.dropzone=function(e){return l(e),j.instances[e].$vm.dropzone},M.prototype.option=function(e,t,n){l(e),u.call(j.instances[e],t,n),p.call(j.instances[e],this)},M.prototype.errors=function(e){return l(e),j.instances[e].$vm.errors},t.a=M}])});